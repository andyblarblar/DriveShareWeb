<header>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css"
          integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="static/styles.css">
</header>

<div id="login-form-container">
    <form action="/signup" method="post" id="login-form" class="pure-form pure-form-stacked">
        <fieldset>
            <legend>Signup</legend>
            <label for="username">username:</label>
            <input type="email" name="username" required>
            <label for="password">password:</label>
            <input type="password" name="password" required>
            <label for="seq1">What is the name of a pet you have owned?:</label>
            <input type="text" name="seq1" required>
            <label for="seq2">What is the name of your parents hometown?:</label>
            <input type="text" name="seq2" required>
            <label for="seq3">What is your favorite programming language?:</label>
            <input type="text" name="seq3" required>
            <input type="submit" name="submit">
        </fieldset>
    </form>
    <a href="/login">Return to login</a>
</div>


<script>
    const form = document.getElementById("login-form")
    form.addEventListener("submit", submitForm)

    // Manual form submission
    function submitForm(e) {
        e.preventDefault()

        fetch(form.action,
            {
                method: "post",
                body: new FormData(form)
            }
        ).then(
            r => {
                // Redirect back to login if account is successfully created
                if (!r.ok) {
                    alert("Invalid username or password")
                } else {
                    alert("Account created successfully!")
                    window.location = "/login"
                }
            }
        )
    }
</script>
